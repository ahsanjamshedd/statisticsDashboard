<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Statistics Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Site-wide header will be loaded here -->
    <div id="site-header"></div>


    <div class="dashboard-bg py-4">
      <div class="card shadow-lg border-0 rounded-4 mx-auto" style="max-width:1700px;background:#f7fafd;">
        <main class="dashboard-inner-content px-4 py-3" style="max-width:1500px;margin:auto;">
        <h2 class="mb-4 fw-bold" style="font-size:2rem">Dashboard Overview</h2>
        <div class="row g-4 mb-4">
          <div class="col-md-4">
            <div class="card stat-card shadow-sm border-0 rounded-4 p-4 h-100 d-flex flex-row align-items-center justify-content-between" style="background:linear-gradient(135deg,#f7fafd 60%,#eaf1fa 100%);">
              <div>
                <div class="small text-muted mb-1">Active Irrigators</div>
                <div class="h2 fw-bold mb-1" id="activeSegments">45</div>
                <div class="text-success small">▲ 15% from last month</div>
              </div>
              <div class="stat-icon bg-light rounded-circle d-flex align-items-center justify-content-center" style="width:54px;height:54px;">
                <i class="bi bi-people-fill" style="font-size:2rem;color:#2a537c;"></i>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card stat-card shadow-sm border-0 rounded-4 p-4 h-100 d-flex flex-row align-items-center justify-content-between" style="background:linear-gradient(135deg,#f7fafd 60%,#eaf1fa 100%);">
              <div>
                <div class="small text-muted mb-1">Updates Sent</div>
                <div class="h2 fw-bold mb-1" id="updatesSent">8,701</div>
                <div class="text-success small">▲ Avg 120 messages/day</div>
              </div>
              <div class="stat-icon bg-light rounded-circle d-flex align-items-center justify-content-center" style="width:54px;height:54px;">
                <i class="bi bi-chat-dots-fill" style="font-size:2rem;color:#2a537c;"></i>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card stat-card shadow-sm border-0 rounded-4 p-4 h-100 d-flex flex-row align-items-center justify-content-between" style="background:linear-gradient(135deg,#f7fafd 60%,#eaf1fa 100%);">
              <div>
                <div class="small text-muted mb-1">Read Rate</div>
                <div class="h2 fw-bold mb-1" id="farmerReadRate">78.5%</div>
                <div class="text-success small">▲ Above Target</div>
              </div>
              <div class="stat-icon bg-light rounded-circle d-flex align-items-center justify-content-center" style="width:54px;height:54px;">
                <i class="bi bi-graph-up" style="font-size:2rem;color:#2a537c;"></i>
              </div>
            </div>
          </div>
        </div>

      <!-- Impact Trends row -->
      <h5 class="mb-3 fw-semibold" style="font-size:1.2rem;">Impact Trends</h5>
      <div class="row g-4 mb-4 align-items-stretch">
        <div class="col-lg-8">
          <div class="card chart-card shadow-sm border-0 rounded-4 p-4 h-100">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h6 class="mb-0 fw-bold" style="font-size:1.1rem;">Farmer Engagement Trend (Last 90 Days)</h6>
              <button id="refreshMetrics" class="btn btn-sm btn-outline-secondary">Refresh</button>
            </div>
            <canvas id="engagementChart" height="120"></canvas>
                      <div class="pt-3 text-end">
                        <a href="engagement-analytics.html" class="btn btn-primary">Open Analytics</a>
                      </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="card chart-card shadow-sm border-0 rounded-4 p-4 h-100 d-flex flex-column justify-content-between">
            <div>
              <h6 class="mb-3 fw-bold" style="font-size:1.1rem;">Analytics & Reports</h6>
              <p class="small text-muted mb-2">View detailed analytics, reports and geographic distribution for campaigns.</p>
              <div class="mt-2">
                <canvas id="analyticsPreview" width="300" height="80" style="width:100%;height:80px"></canvas>
              </div>
            </div>
            <div class="pt-3">
              <a href="analytics-reports.html" class="btn btn-primary w-100">Open Analytics</a>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-4 p-3 shadow-sm border-0 rounded-4">
        <div class="d-flex align-items-center flex-wrap gap-2">
          <button class="btn btn-primary" id="newCampaignBtn">Send New Ground Update</button>
          <button class="btn btn-outline-secondary">Manage Templates</button>
        </div>
      </div>

      <div class="card p-3 shadow-sm border-0 rounded-4">
        <h5 class="mb-3 fw-semibold" style="font-size:1.1rem;">Recent Campign</h5>
        <div class="table-responsive">
          <table class="table table-borderless align-middle mb-0" style="font-size:0.97rem;">
            <thead>
              <tr class="text-muted small">
                <th>Campaign Name</th>
                <th>Date Sent</th>
                <th>Status</th>
                <th>Recipients</th>
                <th>Opened</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="templatesTable">
              <tr>
                <td><span style="font-weight:600; color:#222;">Campaign 1</span></td>
                <td>
                  <span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">Time-time</span><br>
                  <span class="text-muted small">2025-11-20</span>
                </td>
                <td><span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">Active</span></td>
                <td>15,890</td>
                <td>
                  <span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">12,500</span>
                </td>
                <td>
                  <button class="btn btn-sm btn-link text-primary" title="Edit"><i class="bi bi-pencil"></i></button>
                  <button class="btn btn-sm btn-link text-danger" title="Delete"><i class="bi bi-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td><span style="font-weight:600; color:#222;">Campaign 2</span></td>
                <td>
                  <span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">Recepting</span><br>
                  <span class="text-muted small">2025-11-15</span>
                </td>
                <td><span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">Paused</span></td>
                <td>9,210</td>
                <td>
                  <span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">7,800</span>
                </td>
                <td>
                  <button class="btn btn-sm btn-link text-primary" title="Edit"><i class="bi bi-pencil"></i></button>
                  <button class="btn btn-sm btn-link text-danger" title="Delete"><i class="bi bi-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td><span style="font-weight:600; color:#222;">Campaign 3</span></td>
                <td>
                  <span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">Conditional</span><br>
                  <span class="text-muted small">2025-11-10</span>
                </td>
                <td><span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">Paused</span></td>
                <td>1</td>
                <td>
                  <span style="background:#eaf1fa;color:#2a537c;padding:4px 16px;border-radius:12px;font-size:0.97rem;">1</span>
                </td>
                <td>
                  <button class="btn btn-sm btn-link text-primary" title="Edit"><i class="bi bi-pencil"></i></button>
                  <button class="btn btn-sm btn-link text-danger" title="Delete"><i class="bi bi-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
        </main>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
      // Dynamically load the site header
      fetch('header.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('site-header').innerHTML = data;
        });
    </script>
    <script src="app.js"></script>
  </body>
</html>
